(()=>{const e=document.getElementById("commentform"),t=document.getElementById("capError");async function n(){t.classList.add("hideElement");const e=await(await fetch("/wp-admin/admin-ajax.php?action=gox_create_captcha")).json(),{image:n,token:a}=e.data.Client.captcha,d=document.getElementById("capImg");d&&(d.src=n);const c=document.getElementById("capToken");c&&(c.value=a),document.getElementById("capOverlay")?.classList.add("showElement"),document.getElementById("capModal")?.classList.add("showModal")}function a(){const e=document.getElementById("capCode");e&&(e.value=""),document.getElementById("capOverlay")?.classList.remove("showElement"),document.getElementById("capModal")?.classList.remove("showModal")}if(document.getElementById("capOverlay")?.addEventListener("click",a),e){e.noValidate=!0,e.addEventListener("keyup",(e=>"Escape"===e.key&&a())),e.addEventListener("submit",(d=>{if(e.checkValidity())if(e.classList.remove("form-submit-fail"),document.getElementById("capCode")?.value){const t=[].filter.call(e,(e=>!!e.name)).map((e=>`${encodeURIComponent(e.name).replace("%20","+")}=${encodeURIComponent(e.value).replace("%20","+")}`)).join("&");(async()=>{try{if(!(await fetch(e.action,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:t})).ok)return void e.classList.add("form-submit-fail")}catch(t){return void e.classList.add("form-submit-fail")}window.location.reload()})()}else{if("capSendBtn"===d.submitter.id)return t.classList.remove("hideElement"),void d.preventDefault();n()}else e.classList.add("form-submit-fail");a(),d.preventDefault()}));const d=document.getElementById("capRefreshBtn");d&&d.addEventListener("click",(()=>{n()}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("second_name");e&&e.removeAttribute("required");const t=document.getElementById("cancel-comment-reply-link")?.parentNode;if(t){const e=document.getElementById("submit");e?.parentNode?.insertBefore(t,e)}}))})();